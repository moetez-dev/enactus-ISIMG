<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bureau Admin | Enactus ISIMG</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-50">
    <nav class="p-6 bg-black text-white flex justify-between items-center px-12">
        <span class="font-black text-xl uppercase tracking-tighter" style="font-family: 'Montserrat';">BUREAU <span class="text-[#FFC222]">PANEL</span></span>
        <button onclick="auth.signOut().then(()=>window.location.href='login.html')" class="text-xs font-bold border border-white/20 px-4 py-2 rounded-xl">Logout</button>
    </nav>

    <div class="max-w-4xl mx-auto py-12 px-6">
        <h2 class="text-4xl font-black mb-10 uppercase tracking-tighter italic">New Applications</h2>
        
        <div id="list" class="grid gap-4">
            <!-- العباد اللي قدمت تظهر هنا -->
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        // جلب العباد اللي حالتهم "pending"
        db.collection("users").where("status", "==", "pending").onSnapshot(snap => {
            const list = document.getElementById('list');
            list.innerHTML = "";
            snap.forEach(doc => {
                const u = doc.data();
                list.innerHTML += `
                    <div class="bg-white p-6 rounded-[2.5rem] shadow-sm flex justify-between items-center border border-gray-100">
                        <div>
                            <p class="font-black text-lg uppercase">${u.fullName}</p>
                            <p class="text-xs font-bold text-[#FFC222] uppercase tracking-widest">${u.department} | ${u.level}</p>
                            <p class="text-gray-400 text-sm mt-1 italic">"${u.motivation}"</p>
                        </div>
                        <button onclick="approve('${doc.id}')" class="bg-black text-white px-6 py-3 rounded-2xl font-black text-[10px] uppercase tracking-widest hover:bg-[#FFC222] hover:text-black transition-all">Approve</button>
                    </div>
                `;
            });
        });

        async function approve(id) {
            await db.collection("users").doc(id).update({ status: "approved" });
            alert("Member Approved! Now they can access the portal.");
        }
    </script>
</body>
</html>